# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç seed.ts

–°–∫—Ä–∏–ø—Ç `backend/prisma/seed.ts` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–†–æ—Å—Ç–∏—Å–ª–∞–≤** (telegram_id: `7017219152`, —Ä–æ–ª—å: **ADMIN**)
- **–ò–≤–∞–Ω/–≠–¥—É–∞—Ä–¥** (telegram_id: `447493564`, —Ä–æ–ª—å: **CURATOR**)

### üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞

#### –ú–æ–¥—É–ª—å 1: –í–≤–µ–¥–µ–Ω–∏–µ –≤ –ø–∏—Ä–∞–º–∏–¥—É –ú–∏–Ω—Ç–æ (6 —à–∞–≥–æ–≤)
1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (INFO)
2. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∏—Ä–∞–º–∏–¥–∞ –ú–∏–Ω—Ç–æ (INFO)
3. SCQR-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (INFO)
4. –í—ã–¥–µ–ª–∏—Ç—å SCQR –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö (TASK)
5. –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ –ø–æ –ø–∏—Ä–∞–º–∏–¥–µ (TASK)
6. –ê—É–¥–∏–æ—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É (TASK)

#### –ú–æ–¥—É–ª—å 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º—ã—Å–ª–µ–π –∏ —ç–∫–æ–ª–æ–≥–∏—á–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (6 —à–∞–≥–æ–≤)
1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∏—Ä–∞–º–∏–¥—ã –≤ –ø–∏—Å—å–º–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö (INFO)
2. –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º (INFO)
3. –≠–∫–æ–ª–æ–≥–∏—á–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (INFO)
4. –°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–ª–ª–µ–≥–µ –≤ CRM (TASK)
5. –ê—É–¥–∏–æ—Å–æ–æ–±—â–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é (TASK)
6. –ü—Ä–æ–º–ø—Ç –∫ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (TASK)

#### –ú–æ–¥—É–ª—å 3: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ —Å –ò–ò (6 —à–∞–≥–æ–≤)
1. –°–æ–≤–µ—â–∞–Ω–∏—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –ø–∏—Ä–∞–º–∏–¥—ã (INFO)
2. –ö—Ä–∞—Ç–∫–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ (INFO)
3. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò (INFO)
4. –£—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø–ª–∞–Ω—ë—Ä–∫–∏ (TASK)
5. –í–∏–¥–µ–æ-–≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ (TASK)
6. –ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–ª–∞–Ω–∞ –¥–æ–∫–ª–∞–¥–∞ (TASK)

#### –ú–æ–¥—É–ª—å 4: –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è (1 —à–∞–≥)
1. –§–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ (EXAM) ‚Äî –ø–∏—Å—å–º–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ + —É—Å—Ç–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è

**–ò—Ç–æ–≥–æ:** 4 –º–æ–¥—É–ª—è, 19 —à–∞–≥–æ–≤

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å seed

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ npm-—Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd backend
npm run prisma:seed
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Prisma CLI

```bash
cd backend
npx prisma db seed
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ ts-node

```bash
cd backend
npx ts-node prisma/seed.ts
```

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å seed

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:

```bash
cd backend
npm install
npx prisma generate
npx prisma migrate dev --name init
npm run prisma:seed
```

### –ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
cd backend
npx prisma migrate reset  # –û—á–∏—Å—Ç–∏—Ç –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
npm run prisma:seed       # –ó–∞–ø–æ–ª–Ω–∏—Ç –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∫—É—Ä—Å–∞

–ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π –∏–ª–∏ —à–∞–≥–æ–≤ –≤ `prisma/seed.ts`:

1. –û—á–∏—Å—Ç–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
   ```bash
   cd backend
   npx prisma migrate reset
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ seed –∑–∞–Ω–æ–≤–æ:
   ```bash
   npm run prisma:seed
   ```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ß–µ—Ä–µ–∑ Prisma Studio

```bash
cd backend
npm run prisma:studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ `http://localhost:5555`, –≥–¥–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

### –ß–µ—Ä–µ–∑ PostgreSQL

```bash
psql -U minto_user -d minto_db -h localhost

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT "telegramId", "firstName", "lastName", role FROM "User";

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥—É–ª–∏
SELECT index, title, "isExam", "isActive" FROM "CourseModule" ORDER BY index;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
SELECT m.title, COUNT(s.id) as steps_count 
FROM "CourseModule" m 
LEFT JOIN "CourseStep" s ON s."moduleId" = m.id 
GROUP BY m.id, m.title 
ORDER BY m.index;
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∫—É—Ä—Å–∞

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫—É—Ä—Å–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `backend/prisma/seed.ts`
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –º–æ–¥—É–ª—å –∏–ª–∏ —à–∞–≥
3. –ò–∑–º–µ–Ω–∏—Ç–µ `content`, `formSchema`, `aiRubric` –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ seed –∑–∞–Ω–æ–≤–æ:
   ```bash
   cd backend
   npx prisma migrate reset
   npm run prisma:seed
   ```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

‚ö†Ô∏è **Seed –æ—á–∏—â–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ!**
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ seed –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü `Submission`, `Enrollment`, `CourseStep`, `CourseModule` –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.

‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `upsert`, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –∏—Ö –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è:
- –†–æ—Å—Ç–∏—Å–ª–∞–≤: —Ä–æ–ª—å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `ADMIN`
- –ò–≤–∞–Ω: —Ä–æ–ª—å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `CURATOR`

üîí **–ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ telegram_id**
Telegram ID –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ ID –≤ Telegram, –∏–Ω–∞—á–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

## Troubleshooting

### –û—à–∏–±–∫–∞: "Cannot find module 'prisma/seed.ts'"

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –ø–∞–ø–∫–µ backend
cd backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ npx
npx ts-node prisma/seed.ts
```

### –û—à–∏–±–∫–∞: "Database schema is not in sync"

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
cd backend
npx prisma generate
npx prisma migrate dev
```

### –û—à–∏–±–∫–∞: "Can't reach database server"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. PostgreSQL –∑–∞–ø—É—â–µ–Ω: `sudo systemctl status postgresql`
2. DATABASE_URL –≤ `.env` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞: `createdb minto_db -U minto_user`

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å seed, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª–∏ –∏ —à–∞–≥–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑:
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/admin/course/*` (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å ADMIN/CURATOR)
- –ö—É—Ä—Å–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –≤ TMA (–∫–æ–≥–¥–∞ –æ–Ω –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤)
- Prisma Studio (`npm run prisma:studio`)

