# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ VPS

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í —ç—Ç–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:
1. **Backend:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ –≤ Telegram –±–æ—Ç–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `profileCompleted` –≤ –º–æ–¥–µ–ª—å User
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getCurrentModule` (–±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç LOCKED –º–æ–¥—É–ª–∏)
   - –£–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Enrollment

2. **TMA (Frontend):**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `profileCompleted` –ø—Ä–∏ –≤—Ö–æ–¥–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/incomplete-profile` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π
   - –î–æ–±–∞–≤–ª–µ–Ω empty state –≤ Dashboard –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –º–æ–¥—É–ª–µ–π
   - –£–ª—É—á—à–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `profileCompleted` –≤ —Ç–∞–±–ª–∏—Ü—É `User`

---

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS

```bash
ssh root@79.132.140.13
```

---

## –®–∞–≥ 2: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backend

```bash
cd /var/www/tma_education/backend
pm2 stop minto-backend
```

---

## –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ Git

```bash
cd /var/www/tma_education
git pull
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
From github.com:rgimprovise/tma_education
   98be90a..293e83e  main -> main
Updating ...
```

---

## –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

```bash
cd backend
npx prisma migrate deploy
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
...
1 migration found in prisma/migrations
Applying migration `20251129003000_add_profile_completed_to_user`
...
Migration applied successfully
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `profileCompleted BOOLEAN NOT NULL DEFAULT false` –≤ —Ç–∞–±–ª–∏—Ü—É `User`

---

## –®–∞–≥ 5: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ä–∞–Ω–µ–µ) –∏–º–µ–ª–∏ `profileCompleted = true` –∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ:

```bash
psql -U minto_user -d minto_db
```

–ó–∞—Ç–µ–º –≤ psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å profileCompleted = true –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—è
UPDATE "User" 
SET "profileCompleted" = true 
WHERE "firstName" IS NOT NULL 
  AND "lastName" IS NOT NULL;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT "telegramId", "firstName", "lastName", "profileCompleted" 
FROM "User";

-- –í—ã–π—Ç–∏
\q
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç—å seed (–æ–±–Ω–æ–≤–∏—Ç —Ç–æ–ª—å–∫–æ –†–æ—Å—Ç–∏—Å–ª–∞–≤–∞ –∏ –≠–¥—É–∞—Ä–¥–∞):

```bash
cd /var/www/tma_education/backend
npx prisma db seed
```

---

## –®–∞–≥ 6: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å backend

```bash
cd /var/www/tma_education/backend
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
> minto-backend@1.0.0 build
> nest build

webpack 5.97.1 compiled successfully in XXXX ms
```

---

## –®–∞–≥ 7: –ó–∞–ø—É—Å—Ç–∏—Ç—å backend

```bash
pm2 start minto-backend
```

–ò–ª–∏, –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:

```bash
pm2 restart minto-backend
```

---

## –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend

```bash
pm2 logs minto-backend --lines 30
```

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
[NestApplication] Nest application successfully started
üöÄ Application is running on: http://localhost:3002
ü§ñ Telegram Bot started: @MintoEducationBot
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ª–æ–≥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
- Telegram –±–æ—Ç —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–∏–∞–ª–æ–≥ –ø—Ä–∏ `/start` –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –®–∞–≥ 9: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å TMA

```bash
cd /var/www/tma_education/tma
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
> minto-tma@1.0.0 build
> tsc && vite build

vite v5.4.21 building for production...
‚úì 113 modules transformed.
dist/index.html                   0.63 kB ‚îÇ gzip:  0.42 kB
dist/assets/index-XXXXXX.css      XX.XX kB ‚îÇ gzip:  X.XX kB
dist/assets/index-XXXXXX.js      XXX.XX kB ‚îÇ gzip: XX.XX kB
‚úì built in X.XXs
```

---

## –®–∞–≥ 10: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Caddy (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
sudo systemctl reload caddy
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

```bash
sudo systemctl status caddy
```

---

## –®–∞–≥ 11: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 11.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ backend API

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ backend –æ—Ç–≤–µ—á–∞–µ—Ç
curl http://localhost:3002/

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# (–º–æ–∂–µ—Ç –±—ã—Ç—å 404, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç)
```

### 11.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ TMA —á–µ—Ä–µ–∑ Caddy

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ TMA –¥–æ—Å—Ç—É–ø–µ–Ω
curl -I https://tma.n8nrgimprovise.space

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTTP/2 200
```

### 11.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram –±–æ—Ç–∞

**–í Telegram:**
1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@MintoEducationBot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
–ë–æ—Ç: üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫—É—Ä—Å ¬´–ü–∏—Ä–∞–º–∏–¥–∞ –ú–∏–Ω—Ç–æ¬ª!
     –î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è.
     üìù –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –∏–º—è:

–í—ã: –ò–≤–∞–Ω

–ë–æ—Ç: ‚úÖ –û—Ç–ª–∏—á–Ω–æ, –ò–≤–∞–Ω!
     üìù –¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é:

–í—ã: –ü–µ—Ç—Ä–æ–≤

–ë–æ—Ç: ‚úÖ –•–æ—Ä–æ—à–æ!
     üìù –ò –ø–æ—Å–ª–µ–¥–Ω–µ–µ ‚Äî —É–∫–∞–∂–∏—Ç–µ –≤–∞—à—É –¥–æ–ª–∂–Ω–æ—Å—Ç—å:

–í—ã: –ú–µ–Ω–µ–¥–∂–µ—Ä

–ë–æ—Ç: ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
     –°–ø–∞—Å–∏–±–æ, –ò–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –æ–±—É—á–µ–Ω–∏—é.
     –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
     [üìö –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å `profileCompleted = true`):**
```
–ë–æ—Ç: üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫—É—Ä—Å ¬´–ü–∏—Ä–∞–º–∏–¥–∞ –ú–∏–Ω—Ç–æ¬ª!
     –í —ç—Ç–æ–º –∫—É—Ä—Å–µ –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å:
     ‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –º—ã—Å–ª–∏
     ‚Ä¢ –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –ø–∏—Ä–∞–º–∏–¥—ã –ú–∏–Ω—Ç–æ
     ‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∫–æ–º–º—É–Ω–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
     
     –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
     [üìö –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
```

### 11.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ TMA

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ TMA —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ –±–æ—Ç–µ (–¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/incomplete-profile` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π, –Ω–æ –±–µ–∑ –º–æ–¥—É–ª–µ–π:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ TMA –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/dashboard` —Å empty state:
     ```
     üîí –ú–æ–¥—É–ª–∏ –ø–æ–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã—Ç—ã
     –ü–æ–∫–∞ –¥–ª—è –≤–∞—Å –Ω–µ –æ—Ç–∫—Ä—ã—Ç –Ω–∏ –æ–¥–∏–Ω –º–æ–¥—É–ª—å.
     –ö—É—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä–æ–µ—Ç –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å, –∫–æ–≥–¥–∞ –Ω–∞—á–Ω—ë—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ.
     ```

3. **–ö—É—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥—É–ª—å:**
   - –í–æ–π–¥–∏—Ç–µ –≤ TMA –∫–∞–∫ –∫—É—Ä–∞—Ç–æ—Ä (telegram_id: 7017219152 –∏–ª–∏ 447493564)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
   - –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ TMA –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å –º–æ–¥—É–ª—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–í –ø—Ä–æ—Ü–µ—Å—Å–µ"

---

## –®–∞–≥ 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
psql -U minto_user -d minto_db
```

–í psql:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ profileCompleted
SELECT "telegramId", "firstName", "lastName", "profileCompleted", "role" 
FROM "User" 
ORDER BY "createdAt" DESC 
LIMIT 5;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å enrollments (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
SELECT u."firstName", u."lastName", e."status", m."title"
FROM "Enrollment" e
JOIN "User" u ON e."userId" = u.id
JOIN "CourseModule" m ON e."moduleId" = m.id
ORDER BY e."unlockedAt" DESC;

\q
```

---

## –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –û—Ç–∫–∞—Ç backend:

```bash
cd /var/www/tma_education
git log --oneline -5

# –ù–∞–π—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç (–¥–æ 98be90a)
# –ù–∞–ø—Ä–∏–º–µ—Ä: 3ef9826

git reset --hard 3ef9826
cd backend
npm run build
pm2 restart minto-backend
```

### –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:

```bash
cd /var/www/tma_education/backend
npx prisma migrate resolve --rolled-back 20251129003000_add_profile_completed_to_user

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL
psql -U minto_user -d minto_db -c 'ALTER TABLE "User" DROP COLUMN "profileCompleted";'
```

### –û—Ç–∫–∞—Ç TMA:

```bash
cd /var/www/tma_education
git reset --hard 3ef9826
cd tma
npm run build
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º:**
```
pm2 status
# minto-backend: status = "errored"
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pm2 logs minto-backend --lines 50
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫—É

# –ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:
cd /var/www/tma_education/backend
npm install
npm run build
pm2 restart minto-backend
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:**
```
Error: Can't reach database server
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
sudo systemctl status postgresql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_URL
cat /var/www/tma_education/backend/.env | grep DATABASE_URL
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Telegram –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º:**
–ë–æ—Ç –º–æ–ª—á–∏—Ç –∏–ª–∏ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pm2 logs minto-backend | grep -i telegram

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
# ü§ñ Telegram Bot started: @MintoEducationBot

# –ï—Å–ª–∏ –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω:
cat /var/www/tma_education/backend/.env | grep TELEGRAM_BOT_TOKEN
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: TMA –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å TMA:
cd /var/www/tma_education/tma
rm -rf dist
npm run build
```

---

## Checklist —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] Backend –∑–∞–ø—É—â–µ–Ω (`pm2 status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `online`)
- [ ] Backend –ª–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] –î–∏–∞–ª–æ–≥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] TMA –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ –±–æ—Ç–µ
- [ ] TMA –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `/incomplete-profile` –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- [ ] TMA –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç empty state –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –º–æ–¥—É–ª–µ–π
- [ ] –ö—É—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ TMA
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥—É–ª—è
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `profileCompleted`

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs minto-backend`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `pm2 status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: `psql -U minto_user -d minto_db`

---

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 2025-11-29  
**–ê–≤—Ç–æ—Ä:** AI Assistant

