# üìã –ö–û–ù–¢–ï–ö–°–¢ –î–õ–Ø –ù–û–í–û–ì–û –ß–ê–¢–ê

## üéØ –û –ü–†–û–ï–ö–¢–ï

**–°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è ¬´–ü–∏—Ä–∞–º–∏–¥–∞ –ú–∏–Ω—Ç–æ¬ª** ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏ ¬´–ù–µ–¥–æ—Ä–æ–≥–∞—è –ú–µ–±–µ–ª—å¬ª –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –ø–∏—Ä–∞–º–∏–¥—ã –ú–∏–Ω—Ç–æ.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- **Backend**: NestJS + Prisma + PostgreSQL + Telegram Bot (grammY) + OpenAI
- **Frontend**: React + Vite (Telegram Mini App)
- **Deployment**: VPS —Å PM2, Caddy reverse proxy

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
.
‚îú‚îÄ‚îÄ backend/              # NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, Telegram WebApp validation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ course/      # –ö—É—Ä—Å—ã, –º–æ–¥—É–ª–∏, —à–∞–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ submissions/ # –°–¥–∞—á–∏ –∑–∞–¥–∞–Ω–∏–π, AI review
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram/    # Telegram Bot (grammY)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai/          # OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma/      # PrismaService
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma  # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí npx prisma generate
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/     # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ tma/                 # React Telegram Mini App
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # –°—Ç—Ä–∞–Ω–∏—Ü—ã (learner, curator)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/  # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îî‚îÄ‚îÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
    ‚îú‚îÄ‚îÄ README.md                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ ARCHITECTURE.md             # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
    ‚îú‚îÄ‚îÄ PROJECT_RULES.md           # ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    ‚îú‚îÄ‚îÄ full_minto_bot_spec.md      # –ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ SPEC_Minto_TMA.md           # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –¢–ó
```

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–†–ê–í–ò–õ–ê –†–ê–ó–†–ê–ë–û–¢–ö–ò

**‚ö†Ô∏è –í–°–ï–ì–î–ê –ß–ò–¢–ê–ô `PROJECT_RULES.md` –ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú –†–ê–ë–û–¢–´!**

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. **–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π `npm run build`** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (–∏ backend, –∏ TMA)
2. **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `schema.prisma`** ‚Üí `npx prisma generate` ‚Üí `npm run build`
3. **–ü—Ä–∏ –¥–µ–ø–ª–æ–µ —É–∫–∞–∑—ã–≤–∞–π –í–°–ï —à–∞–≥–∏**: backend + TMA (–µ—Å–ª–∏ –∏–∑–º–µ–Ω—è–ª–∏—Å—å –æ–±–∞)
4. **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π `any`** –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. **–ü—Ä–æ–≤–µ—Ä—è–π –ª–∏–Ω—Ç–µ—Ä** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–• (Prisma)

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- **User**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (LEARNER, CURATOR, ADMIN)
- **Course**: –ö—É—Ä—Å—ã
- **CourseModule**: –ú–æ–¥—É–ª–∏ –∫—É—Ä—Å–∞ (—Å –ø–æ–ª–µ–º `autoUnlockForNewLearners`)
- **CourseStep**: –®–∞–≥–∏/–∑–∞–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è
- **Enrollment**: –î–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –º–æ–¥—É–ª—é (LOCKED, IN_PROGRESS, COMPLETED)
- **Submission**: –°–¥–∞—á–∏ –∑–∞–¥–∞–Ω–∏–π (—Å AI review, curator review)

### ‚ö†Ô∏è –í–ê–ñ–ù–û –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Prisma:
```bash
# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è schema.prisma:
npx prisma migrate dev --name <–Ω–∞–∑–≤–∞–Ω–∏–µ>  # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma generate                        # –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã TypeScript
npm run build                             # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
```

---

## üîê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø –ò –†–û–õ–ò

### –†–æ–ª–∏:
- **LEARNER**: –û–±—É—á–∞—é—â–∏–π—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **CURATOR**: –ö—É—Ä–∞—Ç–æ—Ä (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ `telegramId` –≤ `curators.config.ts`)
- **ADMIN**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ `telegramId`)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- **Telegram WebApp**: `POST /auth/telegram-webapp` (–≤–∞–ª–∏–¥–∞—Ü–∏—è `initData`)
- **JWT**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
- **Guards**: `JwtAuthGuard` + `RolesGuard` –¥–ª—è –∑–∞—â–∏—Ç—ã endpoints

---

## üì° API ENDPOINTS (–∫–ª—é—á–µ–≤—ã–µ)

### Auth:
- `POST /auth/telegram-webapp` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp

### Course (Learner):
- `GET /course/modules` - –°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏
- `GET /course/modules/:id/steps` - –®–∞–≥–∏ –º–æ–¥—É–ª—è
- `GET /course/steps/:id` - –î–µ—Ç–∞–ª–∏ —à–∞–≥–∞

### Course (Admin/Curator):
- `GET /admin/courses` - –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
- `GET /admin/courses/:id` - –î–µ—Ç–∞–ª–∏ –∫—É—Ä—Å–∞
- `POST /admin/modules/:moduleId/unlock` - –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥—É–ª—å
- `POST /admin/modules/:moduleId/lock` - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å
- `PATCH /admin/modules/:moduleId/auto-unlock` - –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö

### Submissions:
- `POST /submissions` - –°–æ–∑–¥–∞—Ç—å —Å–¥–∞—á—É
- `GET /submissions/my` - –ú–æ–∏ —Å–¥–∞—á–∏
- `POST /submissions/:id/request-resubmission` - –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é —Å–¥–∞—á—É

### Submissions (Admin/Curator):
- `GET /admin/submissions` - –°–ø–∏—Å–æ–∫ —Å–¥–∞—á
- `GET /admin/submissions/:id` - –î–µ—Ç–∞–ª–∏ —Å–¥–∞—á–∏
- `POST /admin/submissions/:id/approve` - –û–¥–æ–±—Ä–∏—Ç—å
- `POST /admin/submissions/:id/return` - –í–µ—Ä–Ω—É—Ç—å –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
- `DELETE /admin/submissions/:id` - –£–¥–∞–ª–∏—Ç—å —Å–¥–∞—á—É

---

## ü§ñ TELEGRAM BOT

### –ö–æ–º–∞–Ω–¥—ã:
- `/start` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞ WebApp –∫–Ω–æ–ø–∫–∏

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (FSM —á–µ—Ä–µ–∑ `registrationStates` Map)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö/–≤–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞—É–¥–∏–æ-—Å–¥–∞—á
- Callback queries –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫—É—Ä–∞—Ç–æ—Ä–∞ (–æ–¥–æ–±—Ä–∏—Ç—å/–≤–µ—Ä–Ω—É—Ç—å)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–∞–º –∏ –∫—É—Ä–∞—Ç–æ—Ä–∞–º

### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:
- **Webhook** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): `TELEGRAM_USE_WEBHOOK=true`
- **Polling** (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏): `TELEGRAM_USE_WEBHOOK=false`

---

## üé® TMA (TELEGRAM MINI APP)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

#### Learner:
- `/` - Dashboard (—Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π)
- `/modules/:id` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è (—Å–ø–∏—Å–æ–∫ —à–∞–≥–æ–≤)
- `/steps/:id` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞–Ω–∏—è (—Å–¥–∞—á–∞ –æ—Ç–≤–µ—Ç–∞)

#### Curator/Admin:
- `/curator/courses` - –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
- `/curator/courses/:courseId` - –î–∞—à–±–æ—Ä–¥ –∫—É—Ä—Å–∞
- `/curator` - –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤
- `/curator/users/:userId` - –î–µ—Ç–∞–ª–∏ —É—á–µ–Ω–∏–∫–∞
- `/curator/submissions/:id` - –î–µ—Ç–∞–ª–∏ —Å–¥–∞—á–∏
- `/curator/course-builder` - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–∞

### API –∫–ª–∏–µ–Ω—Ç:
- `tma/src/services/api.ts` - Axios –∫–ª–∏–µ–Ω—Ç —Å JWT —Ç–æ–∫–µ–Ω–æ–º

---

## üîß –¢–ò–ü–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–æ–±–ª–µ–º–∞ 1: `npm run build` –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏ —Ç–∏–ø–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞**: Prisma Client –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `schema.prisma`
**–†–µ—à–µ–Ω–∏–µ**: `npx prisma generate` ‚Üí `npm run build`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ TMA –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ VPS
**–ü—Ä–∏—á–∏–Ω–∞**: TMA –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
**–†–µ—à–µ–Ω–∏–µ**: `cd tma && npm run build`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: `TS2353: Property 'X' does not exist`
**–ü—Ä–∏—á–∏–Ω–∞**: –¢–∏–ø—ã Prisma –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
**–†–µ—à–µ–Ω–∏–µ**: `npx prisma generate` ‚Üí `npm run build`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Circular dependency
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä—è–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ModuleRef` –¥–ª—è lazy loading

### –ü—Ä–æ–±–ª–µ–º–∞ 5: ValidationPipe –æ—à–∏–±–∫–∏
**–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –≤ DTO
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `@IsString()`, `@IsOptional()`, –∏ —Ç.–¥.

---

## üöÄ –î–ï–ü–õ–û–ô –ù–ê VPS

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞:

#### Backend:
```bash
cd /var/www/tma_education/backend
git pull
# ‚ö†Ô∏è –ï—Å–ª–∏ –∏–∑–º–µ–Ω—è–ª—Å—è schema.prisma:
npx prisma generate
npx prisma migrate deploy
npm run build
pm2 restart minto-backend
```

#### TMA:
```bash
cd /var/www/tma_education/tma
git pull
npm run build
# –§–∞–π–ª—ã –≤ dist/ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### ‚ö†Ô∏è –í–ê–ñ–ù–û:
- **–í–°–ï–ì–î–ê —É–∫–∞–∑—ã–≤–∞–π –æ–±–∞ —Ä–∞–∑–¥–µ–ª–∞** (backend + TMA), –¥–∞–∂–µ –µ—Å–ª–∏ –∏–∑–º–µ–Ω—è–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω
- **–í–°–ï–ì–î–ê —É–∫–∞–∑—ã–≤–∞–π `npx prisma generate`**, –µ—Å–ª–∏ –∏–∑–º–µ–Ω—è–ª—Å—è `schema.prisma`
- **–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π `npm run build`** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

---

## üìù –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´

### Backend:
- `backend/prisma/schema.prisma` - –°—Ö–µ–º–∞ –ë–î
- `backend/src/telegram/telegram.service.ts` - Telegram Bot –ª–æ–≥–∏–∫–∞
- `backend/src/course/course.service.ts` - –õ–æ–≥–∏–∫–∞ –∫—É—Ä—Å–æ–≤
- `backend/src/submissions/submissions.service.ts` - –õ–æ–≥–∏–∫–∞ —Å–¥–∞—á
- `backend/src/ai/ai.service.ts` - OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### TMA:
- `tma/src/services/api.ts` - API –∫–ª–∏–µ–Ω—Ç
- `tma/src/pages/curator/CourseDashboardPage.tsx` - –î–∞—à–±–æ—Ä–¥ –∫—É—Ä—Å–∞
- `tma/src/pages/StepPage.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞–Ω–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- `backend/src/users/curators.config.ts` - –°–ø–∏—Å–æ–∫ –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ (telegramId)
- `backend/.env` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è backend
- `tma/.env` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è TMA

---

## üéì –ö–õ–Æ–ß–ï–í–´–ï –§–ò–ß–ò

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥—É–ª–µ–π –¥–ª—è –Ω–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
- –ö—É—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∏—Ç—å `autoUnlockForNewLearners` –¥–ª—è –º–æ–¥—É–ª—è
- –ù–æ–≤—ã–µ —É—á–µ–Ω–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### 2. –ê—É–¥–∏–æ/–≤–∏–¥–µ–æ —Å–¥–∞—á–∏
- –£—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã–º/–≤–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —á–µ—Ä–µ–∑ OpenAI Whisper
- AI review —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### 3. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–∞
- –ö—É—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –∏ —à–∞–≥–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—ã –æ—Ç–≤–µ—Ç–æ–≤ (`formSchema`)
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è AI review (`aiRubric`)

### 4. –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–∞–º (–æ–¥–æ–±—Ä–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—Ç, –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥—É–ª—è)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫—É—Ä–∞—Ç–æ—Ä–∞–º (–Ω–æ–≤—ã–µ —Å–¥–∞—á–∏, –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é —Å–¥–∞—á—É)
- –ö–Ω–æ–ø–∫–∏ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

---

## ‚ö†Ô∏è –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ö–û–ú–ú–ò–¢–û–ú

```bash
# Backend
cd backend
npm run lint
npm run build
# –ï—Å–ª–∏ –∏–∑–º–µ–Ω—è–ª—Å—è schema.prisma:
npx prisma generate
npm run build  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—â—ë —Ä–∞–∑

# TMA
cd ../tma
npm run lint
npm run build

# –ï—Å–ª–∏ –≤—Å—ë –û–ö - –∫–æ–º–º–∏—Ç–∏—Ç—å
git add -A
git commit -m "..."
git push
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: `PROJECT_RULES.md` ‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ**
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `ARCHITECTURE.md`
- **–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: `full_minto_bot_spec.md`
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –¢–ó**: `SPEC_Minto_TMA.md`

---

## üéØ –ü–†–ò–ù–¶–ò–ü–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –∫–æ–º–ø–∏–ª—è—Ü–∏—é** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
2. **–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–µ–ø–ª–æ—è** (backend + TMA)
3. **–í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–π Prisma Client** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã
4. **–ò—Å–ø–æ–ª—å–∑—É–π —è–≤–Ω—ã–µ —Ç–∏–ø—ã** –≤–º–µ—Å—Ç–æ `any`
5. **–ü—Ä–æ–≤–µ—Ä—è–π –ª–∏–Ω—Ç–µ—Ä** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
6. **–ò–∑–±–µ–≥–∞–π circular dependencies** (–∏—Å–ø–æ–ª—å–∑—É–π `ModuleRef`)
7. **–î–æ–±–∞–≤–ª—è–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã** –≤ DTO
8. **–ó–∞—â–∏—â–∞–π endpoints** guards

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

1. –ü—Ä–æ–≤–µ—Ä—å `npm run build` (backend –∏/–∏–ª–∏ TMA)
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Prisma Client –æ–±–Ω–æ–≤–ª—ë–Ω (`npx prisma generate`)
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`npx prisma migrate deploy`)
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ VPS (`pm2 logs minto-backend`)
5. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)

---

**–ü–û–ú–ù–ò: –õ—É—á—à–µ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, —á–µ–º 10 –º–∏–Ω—É—Ç –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ VPS!**

