/**
 * Строка экспорта сырых данных по сдаче (Submission)
 * 
 * Используется для экспорта всех ответов участников в текстовом/табличном формате
 * для последующего анализа в ИИ (поиск слов-паразитов, ошибок, анализ сложности формулировок и т.д.)
 */
export interface SubmissionExportRow {
  // Идентификаторы
  submissionId: string;
  userId: string;
  
  // Информация о пользователе
  userFullName: string; // "Иван Иванов" или "Иван" или "Не указано"
  userPosition: string | null; // Должность пользователя
  userRole: string; // LEARNER, CURATOR, ADMIN (обычно LEARNER)
  
  // Информация о курсе
  courseId: string;
  courseTitle: string;
  
  // Информация о модуле
  moduleId: string;
  moduleTitle: string;
  moduleIndex: number; // 1, 2, 3, 4 (4 = экзамен)
  
  // Информация о шаге
  stepId: string;
  stepTitle: string;
  stepIndex: number; // Порядковый номер в модуле (0, 1, 2, ...)
  stepType: 'INFO' | 'TASK' | 'QUIZ' | 'EXAM'; // Тип шага
  isRequired: boolean; // Обязателен ли шаг для завершения модуля
  
  // Ответ пользователя
  answerType: 'TEXT' | 'AUDIO' | 'VIDEO' | 'FILE'; // Тип ответа
  /**
   * Текстовый ответ или транскрипт аудио/видео
   * 
   * Правила заполнения:
   * - Для TEXT: текст ответа из answerText
   * - Для AUDIO/VIDEO: транскрипт из answerText (если есть, после распознавания через Whisper)
   * - Если транскрипта нет: пустая строка или "[AUDIO_FILE]" / "[VIDEO_FILE]"
   * - Для FILE: пустая строка или "[FILE]"
   * 
   * Это поле - ключевое для анализа в ИИ, так как содержит весь текстовый контент ответа
   */
  answerTextOrTranscript: string;
  
  // Оценки
  aiScore: number | null; // Оценка от ИИ (0-maxScore)
  curatorScore: number | null; // Финальная оценка куратора (0-maxScore)
  
  // Статус
  status: 'SENT' | 'AI_REVIEWED' | 'CURATOR_APPROVED' | 'CURATOR_RETURNED';
  
  // Комментарии (важны для анализа обратной связи)
  /**
   * Комментарий от ИИ
   * Может содержать анализ ответа, рекомендации, замечания
   * Полезно для анализа качества проверки ИИ
   */
  aiFeedback: string | null;
  
  /**
   * Комментарий от куратора
   * Может содержать обратную связь, замечания, рекомендации
   * Полезно для анализа качества обратной связи кураторов
   */
  curatorFeedback: string | null;
  
  // Временные метки
  createdAt: Date; // Когда сдача была создана
  updatedAt: Date; // Когда сдача была последний раз обновлена
  
  // Дополнительные поля для аналитики
  /**
   * Запрошена ли повторная отправка
   * true = участник запросил возможность пересдать
   */
  resubmissionRequested: boolean;
  
  /**
   * Когда была запрошена повторная отправка
   * null если не запрашивалась
   */
  resubmissionRequestedAt: Date | null;
  
  /**
   * ID сообщения бота с инструкцией (для аудио-сдач)
   * Может быть полезно для аналитики взаимодействия с ботом
   */
  telegramPromptMessageId: number | null;
  
  /**
   * Максимальный балл за шаг
   * Полезно для нормализации оценок (aiScore/maxScore, curatorScore/maxScore)
   */
  maxScore: number;
  
  // Потенциальные поля для будущего расширения (НЕ в БД сейчас):
  /**
   * Теги категорий ошибок (например: ["орфография", "пунктуация", "стиль"])
   * Может быть добавлено в будущем через отдельную таблицу или JSON поле
   * Полезно для категоризации проблем в ответах
   */
  // errorTags?: string[];
  
  /**
   * Теги речевых проблем (например: ["слова-паразиты", "паузы", "повторы"])
   * Может быть добавлено в будущем через отдельную таблицу или JSON поле
   * Полезно для анализа аудио-ответов и транскриптов
   */
  // speechIssuesTags?: string[];
  
  /**
   * Сложность формулировок (оценка от 1 до 10)
   * Может быть вычислена ИИ или добавлена куратором
   * Полезно для анализа уровня сложности ответов
   */
  // complexityScore?: number;
  
  /**
   * Длина ответа в символах
   * Может быть вычислена автоматически
   * Полезно для анализа краткости/развёрнутости ответов
   */
  // answerLength?: number;
  
  /**
   * Длина ответа в словах
   * Может быть вычислена автоматически
   * Полезно для анализа объёма ответов
   */
  // answerWordCount?: number;
  
  /**
   * Время проверки ИИ (в секундах)
   * Может быть добавлено в будущем для аналитики производительности
   */
  // aiReviewDuration?: number;
  
  /**
   * Время транскрипции аудио (в секундах)
   * Может быть добавлено в будущем для аналитики производительности
   */
  // transcriptionDuration?: number;
}

